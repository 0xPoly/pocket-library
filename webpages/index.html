<!DOCTYPE html>
<html>
    <head>
        <title>Pocket Library</title>
        <link rel="stylesheet" href="index.css">
    </head>

    <body onload="setupPage()">
        <h1>Pocket Library</h1>
        <hr>
        <noscript> <em>Javascript is required to use the library. Sorry, procesisng has to be done
                client-side. </em></noscript>
        <div id="bookshelf">
            <h2>Book Selection</h2>
                Browse at your leisure...
        </div>
        <div id="sidebar">
            <h3> Welcome </h3>
            This is Pocket Library, the portable WiFi library that anyone can read from and
            contribute to. Learn to setup your own <a href="website">here</a>.
            <h3> Contribute </h3>
            Got any books worth reading? Upload them below.

            <form class="book_upload" method="post" action="cgi-bin/upload.sh" enctype="multipart/form-data">
                <input type="file" name="file" />
                <input type="submit" />
            </form>

            Please note that books need to be approved by the library owner before you they are
            shown.
        </div>
    </body>

    <script>
    "use strict";
    var book_file_list;

    function setupPage() {
        getBookList()
    } 
    function getBookList() {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
            if (xhttp.readyState == 4 && xhttp.status == 200) {
                book_file_list = xhttp.responseText;
                console.log(book_file_list);
            }
        };
        xhttp.open("GET", "cgi-bin/book-list.sh", true);
        xhttp.send();
    } 

    </script>
</html>
